(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{6466:function(e,t,r){Promise.resolve().then(r.bind(r,3552))},3552:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var s=r(7437),n=r(2265),i=r(2869),a=r(5186),l=r(6070),o=r(6818),c=r(2762),d=r(5015),u=r(4603),f=r(8234),g=r(5318),h=r(1328),p=r(9680),m=r(7494),x=r(1734),b=r(8310),v=r(7881),y=r(7586),w=r(8645);function N(e){let{content:t,onChange:r}=e,n=(0,d.jE)({extensions:[u.Z,f.Z,g.Z.configure({types:["paragraph","heading"],alignments:["left","center","right"]})],content:t,onUpdate:e=>{let{editor:t}=e;r(t.getHTML())},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-xl focus:outline-none min-h-[200px] w-full max-w-none"}}});return n?(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden w-full",children:[(0,s.jsxs)("div",{className:"border-b bg-gray-50 p-2 flex flex-wrap gap-1",children:[(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().toggleBold().run(),className:n.isActive("bold")?"bg-gray-200":"",children:(0,s.jsx)(h.Z,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().toggleItalic().run(),className:n.isActive("italic")?"bg-gray-200":"",children:(0,s.jsx)(p.Z,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().toggleUnderline().run(),className:n.isActive("underline")?"bg-gray-200":"",children:(0,s.jsx)(m.Z,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().setTextAlign("left").run(),className:n.isActive({textAlign:"left"})?"bg-gray-200":"",children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().setTextAlign("center").run(),className:n.isActive({textAlign:"center"})?"bg-gray-200":"",children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().setTextAlign("right").run(),className:n.isActive({textAlign:"right"})?"bg-gray-200":"",children:(0,s.jsx)(v.Z,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().toggleBulletList().run(),className:n.isActive("bulletList")?"bg-gray-200":"",children:(0,s.jsx)(y.Z,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>n.chain().focus().toggleOrderedList().run(),className:n.isActive("orderedList")?"bg-gray-200":"",children:(0,s.jsx)(w.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(d.kg,{editor:n})})]}):null}var j=r(6815),k=r(6512),C=r(1828),A=r(5613),O=r(9322);function F(){var e;let[t,r]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[f,g]=(0,n.useState)(null),[h,p]=(0,n.useState)(!0),[m,x]=(0,n.useState)({}),[b,v]=(0,n.useState)({}),[y,w]=(0,n.useState)(null),[F,z]=(0,n.useState)(!1),[I,S]=(0,n.useState)(!1),[E,T]=(0,n.useState)(!1),R=(0,n.useRef)(null),[Z,P]=(0,n.useState)(!0),[_,Q]=(0,n.useState)(!1),[Y,D]=(0,n.useState)(null);(0,n.useEffect)(()=>{H(),J()},[]);let H=async()=>{try{let e=await fetch("/api/config"),t=await e.json();if(t.success){let e=t.config.filter(e=>"INFO"===e.type);r(e),u(t.config.filter(e=>"FAQ"===e.type));let s=t.config.find(e=>"PRIVACY"===e.type);if(g(s||null),0===e.length){let e=await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"INFO",title:"Information",content:"<p>Welcome to our service! Here are some important points to note:</p><ul><li>Please ensure all information provided is accurate</li><li>Upload clear, recent photos</li><li>Follow the guidelines for best results</li></ul>",order:0})});if(e.ok){let t=await e.json();t.success&&r([t.config])}}}p(!1)}catch(e){console.error("Error fetching configuration:",e),p(!1)}},J=async()=>{try{let r=await fetch("/api/settings"),s=await r.json();if(s.success){var e,t;P(null===(e=s.settings.acceptingOrders)||void 0===e||e),Q(null!==(t=s.settings.showEReceipt)&&void 0!==t&&t)}}catch(e){console.error("Error fetching settings:",e),D("Failed to load settings")}},L=(e,r,s)=>{let n="INFO"===s?t.find(t=>t.id===e):d.find(t=>t.id===e),i="INFO"===s?m[e]:b[e],a={...n||{},...i||{},...r};"INFO"===s?x(t=>({...t,[e]:a})):v(t=>({...t,[e]:a}))},B=async e=>{let t="INFO"===e?z:S;t(!0);try{await Promise.all(Object.entries("INFO"===e?m:b).map(e=>{let[t,r]=e;return fetch("/api/config/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})})),await fetch("/api/config/invalidate",{method:"POST",headers:{"Content-Type":"application/json"}}),"INFO"===e?x({}):v({}),await H()}catch(e){console.error("Error applying changes:",e),alert("Failed to apply changes")}finally{t(!1)}},V=async e=>{try{if(!(await fetch("/api/config/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete FAQ item");await H()}catch(e){console.error("Error deleting FAQ item:",e),alert("Failed to delete FAQ item")}},U=async e=>{try{if(!(await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,title:"INFO"===e?"New Information":"New FAQ",content:"INFO"===e?"[]":"New content",order:"INFO"===e?t.length:d.length})})).ok)throw Error("Failed to add new item");await H(),setTimeout(()=>{var e;null===(e=R.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},100)}catch(e){console.error("Error adding new item:",e),alert("Failed to add new item")}},K=async()=>{if(y){T(!0);try{f?await fetch("/api/config/".concat(f.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}):await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"PRIVACY",title:"Privacy Bar",content:y.content||"Your privacy & security is our priority. Your information is encrypted and stays with only us. Key's IDs is a secure and reliable service.",order:0})}),w(null),await H()}catch(e){console.error("Error applying privacy changes:",e),alert("Failed to apply privacy changes")}finally{T(!1)}}},M=async(e,t)=>{try{let r=await fetch("/api/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({[e]:t})});if(!r.ok)throw Error("Failed to update setting");(await r.json()).success&&("acceptingOrders"===e?P(t):"showEReceipt"===e&&Q(t))}catch(e){console.error("Error updating setting:",e),D("Failed to update setting")}};return h?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,s.jsxs)("div",{className:"space-y-6 p-4 md:p-10 pb-16",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Configuration"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage the form and the information on the site."})]}),(0,s.jsx)(k.Z,{className:"my-6"}),Y&&(0,s.jsxs)(A.bZ,{variant:"destructive",className:"mb-6",children:[(0,s.jsx)(O.Z,{className:"h-4 w-4"}),(0,s.jsx)(A.X,{children:Y})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow mb-8",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(j._,{className:"text-base",children:"Accept New Orders"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toggle to enable/disable accepting new orders on the platform"})]}),(0,s.jsx)(C.r,{checked:Z,onCheckedChange:e=>{P(e),M("acceptingOrders",e)}})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow mb-8",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(j._,{className:"text-base",children:"Show E-Receipt Option"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toggle to show/hide the e-receipt checkbox on the order form"})]}),(0,s.jsx)(C.r,{checked:_,onCheckedChange:e=>{Q(e),M("showEReceipt",e)}})]}),(0,s.jsxs)(l.Zb,{className:"mb-8",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,s.jsx)(l.ll,{children:"Privacy Bar Text"}),(0,s.jsx)(i.z,{onClick:K,disabled:E||!y,className:"bg-black text-white hover:bg-black/90 w-full sm:w-auto",children:E?"Applying...":"Apply Changes"})]}),(0,s.jsx)(l.aY,{children:(0,s.jsx)(o.g,{value:(null==y?void 0:y.content)||(null==f?void 0:f.content)||"Your privacy & security is our priority. Your information is encrypted and stays with only us. Key's IDs is a secure and reliable service.",onChange:e=>w({content:e.target.value}),className:"min-h-[100px]",placeholder:"Enter the privacy bar text..."})})]}),(0,s.jsxs)(l.Zb,{className:"mb-8",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,s.jsx)(l.ll,{children:"Information Section"}),(0,s.jsx)(i.z,{onClick:()=>B("INFO"),disabled:F||0===Object.keys(m).length,className:"bg-black text-white hover:bg-black/90 w-full sm:w-auto",children:F?"Applying...":"Apply Changes"})]}),(0,s.jsx)(l.aY,{children:(0,s.jsx)(N,{content:(null===(e=t[0])||void 0===e?void 0:e.content)||"",onChange:e=>{t[0]&&L(t[0].id,{content:e},"INFO")}})})]}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,s.jsx)(l.ll,{children:"FAQ Section"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,s.jsx)(i.z,{onClick:()=>U("FAQ"),variant:"outline",className:"w-full sm:w-auto",children:"Add New"}),(0,s.jsx)(i.z,{onClick:()=>B("FAQ"),disabled:I||0===Object.keys(b).length,className:"bg-black text-white hover:bg-black/90 w-full sm:w-auto",children:I?"Applying...":"Apply Changes"})]})]}),(0,s.jsx)(l.aY,{children:(0,s.jsx)(c.Z5,{onDragEnd:e=>{if(!e.destination)return;let t=Array.from(d),[r]=t.splice(e.source.index,1);t.splice(e.destination.index,0,r);let s=t.map((e,t)=>({...e,order:t}));u(s),v(s.reduce((e,t)=>({...e,[t.id]:{order:t.order}}),{}))},children:(0,s.jsx)(c.bK,{droppableId:"faq-list",children:e=>(0,s.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-4",children:[d.map((e,t)=>(0,s.jsx)(c._l,{draggableId:e.id,index:t,children:t=>{var r,n;return(0,s.jsx)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:"border rounded-lg p-4 bg-white",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{children:"Question"}),(0,s.jsx)(a.I,{value:(null===(r=b[e.id])||void 0===r?void 0:r.title)||e.title,onChange:t=>L(e.id,{title:t.target.value},"FAQ"),placeholder:"Enter question..."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{children:"Answer"}),(0,s.jsx)(o.g,{value:(null===(n=b[e.id])||void 0===n?void 0:n.content)||e.content,onChange:t=>L(e.id,{content:t.target.value},"FAQ"),placeholder:"Enter answer...",className:"min-h-[100px]"})]}),(0,s.jsx)(i.z,{variant:"destructive",size:"sm",onClick:()=>V(e.id),className:"w-full sm:w-auto",children:"Delete"})]})})}},e.id)),e.placeholder]})})})})]})]})]})}},5613:function(e,t,r){"use strict";r.d(t,{X:function(){return c},bZ:function(){return o}});var s=r(7437),n=r(2265),i=r(535),a=r(4508);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:n,...i}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,a.cn)(l({variant:n}),r),...i})});o.displayName="Alert",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h5",{ref:t,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",r),...n})}).displayName="AlertTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",r),...n})});c.displayName="AlertDescription"},2869:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return c}});var s=r(7437),n=r(2265),i=r(7053),a=r(535),l=r(4508);let o=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:a,className:r})),ref:t,...d})});c.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return a},aY:function(){return d},ll:function(){return o}});var s=r(7437),n=r(2265),i=r(4508);let a=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});a.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var s=r(7437),n=r(2265),i=r(4508);let a=n.forwardRef((e,t)=>{let{className:r,type:n,...a}=e;return(0,s.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});a.displayName="Input"},6815:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var s=r(7437),n=r(2265),i=r(6394),a=r(535),l=r(4508);let o=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(i.f,{ref:t,className:(0,l.cn)(o(),r),...n})});c.displayName=i.f.displayName},6512:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(7437),n=r(2265),i=r(5156),a=r(4508);let l=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:l=!0,...o}=e;return(0,s.jsx)(i.f,{ref:t,decorative:l,orientation:n,className:(0,a.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...o})});l.displayName=i.f.displayName},1828:function(e,t,r){"use strict";r.d(t,{r:function(){return l}});var s=r(7437),n=r(2265),i=r(721),a=r(4508);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(i.fC,{className:(0,a.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...n,ref:t,children:(0,s.jsx)(i.bU,{className:(0,a.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=i.fC.displayName},6818:function(e,t,r){"use strict";r.d(t,{g:function(){return a}});var s=r(7437),n=r(2265),i=r(4508);let a=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});a.displayName="Textarea"},4508:function(e,t,r){"use strict";r.d(t,{_:function(){return a},cn:function(){return i}});var s=r(1994),n=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}function a(e){return Math.round(100*e)/100}}},function(e){e.O(0,[338,572,902,569,855,89,971,117,744],function(){return e(e.s=6466)}),_N_E=e.O()}]);