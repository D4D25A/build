(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{613:function(e,t,r){Promise.resolve().then(r.bind(r,1806))},1806:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),n=r(2265),s=r(2869),i=r(5186),o=r(6070),d=r(2762);let l=(0,r(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var c=r(6815),u=r(6512),f=r(1828),m=r(5613),p=r(9322),h=r(6818);function x(){let[e,t]=(0,n.useState)([]),[r,x]=(0,n.useState)(""),[g,y]=(0,n.useState)(""),[b,v]=(0,n.useState)(!0),[j,N]=(0,n.useState)(null),[w,k]=(0,n.useState)(!1),[C,E]=(0,n.useState)(85),[P,R]=(0,n.useState)(!1),[S,_]=(0,n.useState)(null);(0,n.useEffect)(()=>{z(),F()},[]);let F=async()=>{try{var e;let t=await fetch("/api/price"),r=await t.json();(null===(e=r.price)||void 0===e?void 0:e.amount)&&E(r.price.amount)}catch(e){console.error("Error fetching price:",e),N("Failed to load price")}},T=async e=>{if(null===e){_("Price cannot be empty");return}_(null),R(!0);try{let t=await fetch("/api/price",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})});if(!t.ok)throw Error("Failed to update price");let r=await t.json();r.success&&(E(r.price.amount),alert("Price updated successfully"))}catch(e){console.error("Error updating price:",e),alert("Failed to update price")}finally{R(!1)}},z=async()=>{try{let e=await fetch("/api/payment-methods"),r=await e.json();r.success&&t(r.paymentMethods),v(!1)}catch(e){console.error("Error fetching payment methods:",e),N("Failed to load payment methods"),v(!1)}},O=async()=>{if(r.trim())try{let a=await fetch("/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.trim(),paymentInstructions:g.trim(),order:e.length})});if(!a.ok)throw Error("Failed to add payment method");let n=await a.json();n.success&&(t([...e,n.paymentMethod]),x(""),y(""))}catch(e){console.error("Error adding payment method:",e),N("Failed to add payment method")}},I=async r=>{try{if(!(await fetch("/api/payment-methods/".concat(r),{method:"DELETE"})).ok)throw Error("Failed to delete payment method");t(e.filter(e=>e.id!==r))}catch(e){console.error("Error deleting payment method:",e),N("Failed to delete payment method")}},M=async(r,a)=>{try{if(!(await fetch("/api/payment-methods/".concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isEnabled:a})})).ok)throw Error("Failed to update payment method");t(e.map(e=>e.id===r?{...e,isEnabled:a}:e))}catch(e){console.error("Error updating payment method:",e),N("Failed to update payment method")}},Z=async(e,r)=>{try{if(!(await fetch("/api/payment-methods/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to update payment method");t(t=>t.map(t=>t.id===e?{...t,...r}:t))}catch(e){console.error("Error updating payment method:",e),N("Failed to update payment method")}},A=async r=>{if(!r.destination)return;let a=Array.from(e),[n]=a.splice(r.source.index,1);a.splice(r.destination.index,0,n);let s=a.map((e,t)=>({...e,order:t}));t(s);try{if(k(!0),!(await fetch("/api/payment-methods/reorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:s})})).ok)throw Error("Failed to update order")}catch(e){console.error("Error updating order:",e),N("Failed to update order")}finally{k(!1)}};return b?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,a.jsxs)("div",{className:"space-y-6 p-4 md:p-10 pb-16",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Payments"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage payment methods and global price configuration."})]}),(0,a.jsx)(u.Z,{className:"my-6"}),j&&(0,a.jsxs)(m.bZ,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)(m.X,{children:j})]}),(0,a.jsxs)(o.Zb,{className:"mb-8",children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"Global Price Configuration"})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-600 whitespace-nowrap",children:"Current Price: $"}),(0,a.jsx)(i.I,{type:"number",value:null===C?"":C,onChange:e=>{let t=""===e.target.value?null:Number(e.target.value);E(t),_(null===t?"Price cannot be empty":null)},className:"w-full sm:w-32 ".concat(S?"border-red-500":""),min:"0",step:"0.01"})]}),S&&(0,a.jsx)("span",{className:"text-sm text-red-500",children:S})]}),(0,a.jsx)(s.z,{onClick:()=>T(C),disabled:P||null===C,className:"bg-black text-white hover:bg-black/90 w-full sm:w-auto",children:P?"Updating...":"Update Price"})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"Payment Methods"})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg space-y-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Add New Payment Method"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{children:"Method Name"}),(0,a.jsx)(i.I,{placeholder:"Enter payment method name",value:r,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{children:"Payment Instructions"}),(0,a.jsx)(h.g,{placeholder:"Enter payment instructions",value:g,onChange:e=>y(e.target.value),className:"min-h-[100px] resize-y"})]}),(0,a.jsx)(s.z,{onClick:O,className:"bg-black text-white hover:bg-black/90",children:"Add Payment Method"})]})]}),(0,a.jsx)(d.Z5,{onDragEnd:A,children:(0,a.jsx)(d.bK,{droppableId:"payment-methods",children:t=>(0,a.jsxs)("div",{...t.droppableProps,ref:t.innerRef,className:"space-y-4",children:[e.map((e,t)=>(0,a.jsx)(d._l,{draggableId:e.id,index:t,children:t=>(0,a.jsxs)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:"flex flex-col gap-4 p-4 border rounded-lg bg-white hover:border-gray-400 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c._,{htmlFor:"enabled-".concat(e.id),className:"text-sm text-gray-500",children:e.isEnabled?"Enabled":"Disabled"}),(0,a.jsx)(f.r,{id:"enabled-".concat(e.id),checked:e.isEnabled,onCheckedChange:t=>M(e.id,t)})]}),(0,a.jsx)(s.z,{variant:"ghost",size:"icon",onClick:()=>I(e.id),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:(0,a.jsx)(l,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{children:"Payment Instructions"}),(0,a.jsx)(h.g,{value:e.paymentInstructions,onChange:t=>Z(e.id,{paymentInstructions:t.target.value}),placeholder:"Enter payment instructions...",className:"min-h-[100px] resize-y"})]})]})},e.id)),t.placeholder]})})})]})})]})]})}},5613:function(e,t,r){"use strict";r.d(t,{X:function(){return l},bZ:function(){return d}});var a=r(7437),n=r(2265),s=r(535),i=r(4508);let o=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,...s}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:n}),r),...s})});d.displayName="Alert",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...n})}).displayName="AlertTitle";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...n})});l.displayName="AlertDescription"},2869:function(e,t,r){"use strict";r.d(t,{d:function(){return d},z:function(){return l}});var a=r(7437),n=r(2265),s=r(7053),i=r(535),o=r(4508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:l=!1,...c}=e,u=l?s.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(d({variant:n,size:i,className:r})),ref:t,...c})});l.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var a=r(7437),n=r(2265),s=r(4508);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});l.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),n=r(2265),s=r(4508);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},6815:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(7437),n=r(2265),s=r(6394),i=r(535),o=r(4508);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,o.cn)(d(),r),...n})});l.displayName=s.f.displayName},6512:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7437),n=r(2265),s=r(5156),i=r(4508);let o=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:o=!0,...d}=e;return(0,a.jsx)(s.f,{ref:t,decorative:o,orientation:n,className:(0,i.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...d})});o.displayName=s.f.displayName},1828:function(e,t,r){"use strict";r.d(t,{r:function(){return o}});var a=r(7437),n=r(2265),s=r(721),i=r(4508);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...n,ref:t,children:(0,a.jsx)(s.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=s.fC.displayName},6818:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var a=r(7437),n=r(2265),s=r(4508);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});i.displayName="Textarea"},4508:function(e,t,r){"use strict";r.d(t,{_:function(){return i},cn:function(){return s}});var a=r(1994),n=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function i(e){return Math.round(100*e)/100}}},function(e){e.O(0,[338,569,855,971,117,744],function(){return e(e.s=613)}),_N_E=e.O()}]);