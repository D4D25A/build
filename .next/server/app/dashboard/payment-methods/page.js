(()=>{var e={};e.id=2883,e.ids=[2883],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},48348:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>d.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>o}),a(15125),a(13321),a(84752),a(35866);var s=a(23191),r=a(88716),n=a(37922),d=a.n(n),l=a(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let o=["",{children:["dashboard",{children:["payment-methods",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,15125)),"/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/payment-methods/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,13321)),"/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,84752)),"/Users/kyleaditya/Documents/IDF coupon fulldetails/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/payment-methods/page.tsx"],m="/dashboard/payment-methods/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/payment-methods/page",pathname:"/dashboard/payment-methods",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},93342:(e,t,a)=>{Promise.resolve().then(a.bind(a,49539))},49539:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(10326),r=a(17577),n=a(90772),d=a(54432),l=a(33071),i=a(24304);let o=(0,a(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var c=a(31048),m=a(8281),p=a(33261),h=a(43273),u=a(41291),y=a(87673);function x(){let[e,t]=(0,r.useState)([]),[a,x]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[j,b]=(0,r.useState)(!0),[v,N]=(0,r.useState)(null),[P,w]=(0,r.useState)(!1),[k,E]=(0,r.useState)(85),[C,_]=(0,r.useState)(!1),[F,S]=(0,r.useState)(null),I=async e=>{if(null===e){S("Price cannot be empty");return}S(null),_(!0);try{let t=await fetch("/api/price",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})});if(!t.ok)throw Error("Failed to update price");let a=await t.json();a.success&&(E(a.price.amount),alert("Price updated successfully"))}catch(e){console.error("Error updating price:",e),alert("Failed to update price")}finally{_(!1)}},D=async()=>{if(a.trim())try{let s=await fetch("/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.trim(),paymentInstructions:g.trim(),order:e.length})});if(!s.ok)throw Error("Failed to add payment method");let r=await s.json();r.success&&(t([...e,r.paymentMethod]),x(""),f(""))}catch(e){console.error("Error adding payment method:",e),N("Failed to add payment method")}},T=async a=>{try{if(!(await fetch(`/api/payment-methods/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete payment method");t(e.filter(e=>e.id!==a))}catch(e){console.error("Error deleting payment method:",e),N("Failed to delete payment method")}},M=async(a,s)=>{try{if(!(await fetch(`/api/payment-methods/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isEnabled:s})})).ok)throw Error("Failed to update payment method");t(e.map(e=>e.id===a?{...e,isEnabled:s}:e))}catch(e){console.error("Error updating payment method:",e),N("Failed to update payment method")}},A=async(e,a)=>{try{if(!(await fetch(`/api/payment-methods/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to update payment method");t(t=>t.map(t=>t.id===e?{...t,...a}:t))}catch(e){console.error("Error updating payment method:",e),N("Failed to update payment method")}},O=async a=>{if(!a.destination)return;let s=Array.from(e),[r]=s.splice(a.source.index,1);s.splice(a.destination.index,0,r);let n=s.map((e,t)=>({...e,order:t}));t(n);try{if(w(!0),!(await fetch("/api/payment-methods/reorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n})})).ok)throw Error("Failed to update order")}catch(e){console.error("Error updating order:",e),N("Failed to update order")}finally{w(!1)}};return j?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,s.jsxs)("div",{className:"space-y-6 p-4 md:p-10 pb-16",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Payments"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage payment methods and global price configuration."})]}),s.jsx(m.Z,{className:"my-6"}),v&&(0,s.jsxs)(h.bZ,{variant:"destructive",className:"mb-6",children:[s.jsx(u.Z,{className:"h-4 w-4"}),s.jsx(h.X,{children:v})]}),(0,s.jsxs)(l.Zb,{className:"mb-8",children:[s.jsx(l.Ol,{children:s.jsx(l.ll,{children:"Global Price Configuration"})}),s.jsx(l.aY,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 whitespace-nowrap",children:"Current Price: $"}),s.jsx(d.I,{type:"number",value:null===k?"":k,onChange:e=>{let t=""===e.target.value?null:Number(e.target.value);E(t),S(null===t?"Price cannot be empty":null)},className:`w-full sm:w-32 ${F?"border-red-500":""}`,min:"0",step:"0.01"})]}),F&&s.jsx("span",{className:"text-sm text-red-500",children:F})]}),s.jsx(n.z,{onClick:()=>I(k),disabled:C||null===k,className:"bg-black text-white hover:bg-black/90 w-full sm:w-auto",children:C?"Updating...":"Update Price"})]})})]}),(0,s.jsxs)(l.Zb,{children:[s.jsx(l.Ol,{children:s.jsx(l.ll,{children:"Payment Methods"})}),s.jsx(l.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-lg space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Add New Payment Method"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{children:"Method Name"}),s.jsx(d.I,{placeholder:"Enter payment method name",value:a,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{children:"Payment Instructions"}),s.jsx(y.g,{placeholder:"Enter payment instructions",value:g,onChange:e=>f(e.target.value),className:"min-h-[100px] resize-y"})]}),s.jsx(n.z,{onClick:D,className:"bg-black text-white hover:bg-black/90",children:"Add Payment Method"})]})]}),s.jsx(i.Z5,{onDragEnd:O,children:s.jsx(i.bK,{droppableId:"payment-methods",children:t=>(0,s.jsxs)("div",{...t.droppableProps,ref:t.innerRef,className:"space-y-4",children:[e.map((e,t)=>s.jsx(i._l,{draggableId:e.id,index:t,children:t=>(0,s.jsxs)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:"flex flex-col gap-4 p-4 border rounded-lg bg-white hover:border-gray-400 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(c._,{htmlFor:`enabled-${e.id}`,className:"text-sm text-gray-500",children:e.isEnabled?"Enabled":"Disabled"}),s.jsx(p.r,{id:`enabled-${e.id}`,checked:e.isEnabled,onCheckedChange:t=>M(e.id,t)})]}),s.jsx(n.z,{variant:"ghost",size:"icon",onClick:()=>T(e.id),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:s.jsx(o,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{children:"Payment Instructions"}),s.jsx(y.g,{value:e.paymentInstructions,onChange:t=>A(e.id,{paymentInstructions:t.target.value}),placeholder:"Enter payment instructions...",className:"min-h-[100px] resize-y"})]})]})},e.id)),t.placeholder]})})})]})})]})]})}},15125:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/payment-methods/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9276,5015,9308,434,3437,515],()=>a(48348));module.exports=s})();