(()=>{var e={};e.id=3618,e.ids=[3618],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7258:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(25115),r(13321),r(84752),r(35866);var t=r(23191),a=r(88716),i=r(37922),n=r.n(i),l=r(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let o=["",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25115)),"/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/users/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,84752)),"/Users/kyleaditya/Documents/IDF coupon fulldetails/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/users/page.tsx"],u="/dashboard/users/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/users/page",pathname:"/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},47485:(e,s,r)=>{Promise.resolve().then(r.bind(r,35945))},35945:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(10326),a=r(17577),i=r(77109),n=r(35047),l=r(15940),d=r(54432),o=r(90772),c=r(62288),u=r(31048),h=r(34474);function x(){let{data:e}=(0,i.useSession)();(0,n.useRouter)();let[s,r]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[p,j]=(0,a.useState)(null),[f,y]=(0,a.useState)(!1),g=async()=>{try{let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let s=await e.json();r(s.users),m(!1)}catch(e){j(e instanceof Error?e.message:"An error occurred"),m(!1)}},v=async e=>{e.preventDefault();let s=new FormData(e.currentTarget),r={name:s.get("name"),email:s.get("email"),password:s.get("password"),role:s.get("role")};try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){let s=await e.json();throw Error(s.message||"Failed to create user")}await g(),y(!1)}catch(e){alert(e instanceof Error?e.message:"Failed to create user")}},b=async e=>{if(confirm("Are you sure you want to delete this user?"))try{if(!(await fetch(`/api/users/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete user");r(s.filter(s=>s.id!==e))}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user")}};return x?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):p?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-red-500",children:["Error: ",p]})}):(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),(0,t.jsxs)(c.Vq,{open:f,onOpenChange:y,children:[t.jsx(c.hg,{asChild:!0,children:t.jsx(o.z,{children:"Add User"})}),(0,t.jsxs)(c.cZ,{className:"bg-white",children:[t.jsx(c.fK,{children:t.jsx(c.$N,{children:"Add New User"})}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"name",children:"Name"}),t.jsx(d.I,{id:"name",name:"name",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"email",children:"Email"}),t.jsx(d.I,{id:"email",name:"email",type:"email",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"password",children:"Password"}),t.jsx(d.I,{id:"password",name:"password",type:"password",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(h.Ph,{name:"role",defaultValue:"USER",children:[t.jsx(h.i4,{children:t.jsx(h.ki,{})}),(0,t.jsxs)(h.Bw,{children:[t.jsx(h.Ql,{value:"USER",children:"User"}),t.jsx(h.Ql,{value:"ADMIN",children:"Admin"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),t.jsx(o.z,{type:"submit",children:"Create User"})]})]})]})]})]}),t.jsx("div",{className:"rounded-md border",children:(0,t.jsxs)(l.iA,{children:[t.jsx(l.xD,{children:(0,t.jsxs)(l.SC,{children:[t.jsx(l.ss,{children:"Name"}),t.jsx(l.ss,{children:"Email"}),t.jsx(l.ss,{children:"Role"}),t.jsx(l.ss,{children:"Created At"}),t.jsx(l.ss,{children:"Actions"})]})}),t.jsx(l.RM,{children:s.map(s=>(0,t.jsxs)(l.SC,{children:[t.jsx(l.pj,{children:s.name}),t.jsx(l.pj,{children:s.email}),t.jsx(l.pj,{children:s.role}),t.jsx(l.pj,{children:new Date(s.createdAt).toLocaleDateString()}),t.jsx(l.pj,{children:t.jsx("div",{className:"flex gap-2",children:t.jsx(o.z,{variant:"destructive",size:"sm",onClick:()=>b(s.id),disabled:s.id===e?.user?.id,children:"Delete"})})})]},s.id))})]})})]})}},25115:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/Users/kyleaditya/Documents/IDF coupon fulldetails/app/dashboard/users/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[9276,5015,9308,434,739,1359,1721],()=>r(7258));module.exports=t})();